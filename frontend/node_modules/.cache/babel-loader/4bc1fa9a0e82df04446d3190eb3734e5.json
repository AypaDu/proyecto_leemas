{"ast":null,"code":"import _defineProperty from \"C:\\\\Users\\\\Sony\\\\LEEMAS\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"C:\\\\Users\\\\Sony\\\\LEEMAS\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\Sony\\\\LEEMAS\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\Sony\\\\LEEMAS\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\Sony\\\\LEEMAS\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\Sony\\\\LEEMAS\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\Sony\\\\LEEMAS\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"C:\\\\Users\\\\Sony\\\\LEEMAS\\\\frontend\\\\src\\\\Componentes\\\\CrearProducto.js\";\nimport React, { Component } from 'react';\nimport { Col, Container } from 'reactstrap';\n\nvar CrearProducto = /*#__PURE__*/function (_Component) {\n  _inherits(CrearProducto, _Component);\n\n  function CrearProducto() {\n    var _this;\n\n    _classCallCheck(this, CrearProducto);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(CrearProducto).call(this));\n    _this.state = {\n      titulo: '',\n      imagen: '',\n      descripcion: '',\n      precio: '',\n      stock: '',\n      _id: '',\n      productos: []\n    };\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.agregarProducto = _this.agregarProducto.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(CrearProducto, [{\n    key: \"handleChange\",\n    value: function handleChange(e) {\n      var _e$target = e.target,\n          name = _e$target.name,\n          value = _e$target.value;\n      this.setState(_defineProperty({}, name, value));\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.fetchProductos();\n    }\n  }, {\n    key: \"fetchProductos\",\n    value: function fetchProductos() {\n      var _this2 = this;\n\n      fetch('http://localhost:4000/api/articulos').then(function (res) {\n        return res.json();\n      }).then(function (data) {\n        _this2.setState({\n          productos: data\n        });\n\n        console.log(_this2.state.productos);\n      });\n    }\n  }, {\n    key: \"deleteProducto\",\n    value: function deleteProducto(id) {\n      var _this3 = this;\n\n      if (confirm('Va a eliminar el libro?')) {\n        fetch(\"http://localhost:4000/api/articulos/\".concat(id), {\n          method: \"DELETE\",\n          headers: {\n            \"Accept\": \"application/json\",\n            \"Content-Type\": \"application/json\"\n          }\n        }).then(function (res) {\n          return res.json();\n        }).then(function (data) {\n          console.log(data);\n          alert(\"Producto eliminado\");\n\n          _this3.fetchProductos();\n        });\n      }\n    }\n  }, {\n    key: \"editProducto\",\n    value: function editProducto(id) {\n      var _this4 = this;\n\n      fetch(\"http://localhost:4000/api/articulos/\".concat(id)).then(function (res) {\n        return res.json();\n      }).then(function (data) {\n        console.log(data);\n\n        _this4.setState({\n          titulo: data.titulo,\n          imagen: data.imagen,\n          descripcion: data.descripcion,\n          precio: data.precio,\n          stock: data.stock,\n          _id: data._id\n        });\n      });\n    }\n  }, {\n    key: \"agregarProducto\",\n    value: function agregarProducto(e) {\n      var _this5 = this;\n\n      e.preventDefault(); //si state._id es diferente a vacío->voy a actualizar:\n\n      if (this.state._id) {\n        fetch(\"http://localhost:4000/api/articulos/\".concat(this.state._id), {\n          method: \"PUT\",\n          body: JSON.stringify({\n            titulo: this.state.titulo,\n            imagen: this.state.imagen,\n            descripcion: this.state.descripcion,\n            precio: this.state.precio,\n            stock: this.state.stock\n          }),\n          headers: {\n            \"Accept\": \"application/json\",\n            \"Content-Type\": \"aplication/json\"\n          }\n        }).then(function (res) {\n          return res.json;\n        }).then(function (data) {\n          alert('Producto actualizado');\n\n          _this5.setState({\n            titulo: \"\",\n            imagen: \"\",\n            descripcion: \"\",\n            precio: \"\",\n            stock: \"\",\n            _id: \"\"\n          });\n\n          _this5.fetchProductos();\n        });\n      } //si state._id no está vacío-> voy a crearlo:\n      else {\n        fetch(\"http://localhost:4000/api/articulos\", {\n          method: \"POST\",\n          body: JSON.stringify(this.state),\n          headers: {\n            \"Accept\": \"application/json\",\n            \"Content-Type\": \"application/json\"\n          }\n        }).then(function (res) {\n          return res.json();\n        }).then(function (data) {\n          console.log(data);\n          alert(\"Producto creado\");\n\n          _this5.fetchProductos();\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this6 = this;\n\n      return /*#__PURE__*/React.createElement(Container, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        sm: \"3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"h4\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 17\n        }\n      }, \"Nuevo Libro\"), /*#__PURE__*/React.createElement(\"form\", {\n        onSubmit: this.agregarProducto,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"mb-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        name: \"titulo\",\n        className: \"form-control\",\n        type: \"text\",\n        placeholder: \"Ingrese T\\xEDtulo\",\n        onChange: this.handleChange,\n        value: this.state.titulo,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 25\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"mb-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        name: \"imagen\",\n        className: \"form-control\",\n        type: \"text\",\n        placeholder: \"Ingrese link de imagen\",\n        onChange: this.handleChange,\n        value: this.state.imagen,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 25\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"mb-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        name: \"descripcion\",\n        className: \"form-control\",\n        type: \"text\",\n        placeholder: \"Ingrese autor\",\n        onChange: this.handleChange,\n        value: this.state.descripcion,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 25\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"mb-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        name: \"precio\",\n        className: \"form-control\",\n        type: \"text\",\n        placeholder: \"Ingrese precio\",\n        onChange: this.handleChange,\n        value: this.state.precio,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 25\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"mb-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        name: \"stock\",\n        className: \"form-control\",\n        type: \"number\",\n        placeholder: \"Ingrese cantidad\",\n        onChange: this.handleChange,\n        value: this.state.stock,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 25\n        }\n      })), /*#__PURE__*/React.createElement(\"button\", {\n        type: \"submit\",\n        className: \"btn btn-primary\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 21\n        }\n      }, \"Guardar\"))), /*#__PURE__*/React.createElement(Col, {\n        sm: \"10\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"h4\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 17\n        }\n      }, \"Lista de Libros\"), /*#__PURE__*/React.createElement(\"table\", {\n        className: \"table\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"thead\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 29\n        }\n      }, \"Titulo\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 29\n        }\n      }, \"Imagen\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 29\n        }\n      }, \"Autor\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 29\n        }\n      }, \"Precio\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 29\n        }\n      }, \"Cantidad\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 29\n        }\n      }, \"Operacion\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 21\n        }\n      }, this.state.productos.map(function (producto) {\n        return /*#__PURE__*/React.createElement(\"tr\", {\n          key: producto._id,\n          __self: _this6,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 37\n          }\n        }, /*#__PURE__*/React.createElement(\"td\", {\n          __self: _this6,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 200,\n            columnNumber: 41\n          }\n        }, producto.titulo), /*#__PURE__*/React.createElement(\"td\", {\n          __self: _this6,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 201,\n            columnNumber: 41\n          }\n        }, producto.imagen), /*#__PURE__*/React.createElement(\"td\", {\n          __self: _this6,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 41\n          }\n        }, producto.descripcion), /*#__PURE__*/React.createElement(\"td\", {\n          __self: _this6,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 203,\n            columnNumber: 41\n          }\n        }, producto.precio), /*#__PURE__*/React.createElement(\"td\", {\n          __self: _this6,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 41\n          }\n        }, producto.stock), /*#__PURE__*/React.createElement(\"button\", {\n          onClick: function onClick() {\n            return _this6.editProducto(producto._id);\n          },\n          type: \"button\",\n          className: \"btn btn-info\",\n          __self: _this6,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 41\n          }\n        }, \"Editar\"), /*#__PURE__*/React.createElement(\"button\", {\n          onClick: function onClick() {\n            return _this6.deleteProducto(producto._id);\n          },\n          type: \"button\",\n          className: \"btn btn-danger\",\n          __self: _this6,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 41\n          }\n        }, \"Borrar\"));\n      })))));\n    }\n  }]);\n\n  return CrearProducto;\n}(Component);\n\nexport { CrearProducto as default };","map":{"version":3,"sources":["C:/Users/Sony/LEEMAS/frontend/src/Componentes/CrearProducto.js"],"names":["React","Component","Col","Container","CrearProducto","state","titulo","imagen","descripcion","precio","stock","_id","productos","handleChange","bind","agregarProducto","e","target","name","value","setState","fetchProductos","fetch","then","res","json","data","console","log","id","confirm","method","headers","alert","preventDefault","body","JSON","stringify","map","producto","editProducto","deleteProducto"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport {Col, Container} from 'reactstrap'\r\nexport default class CrearProducto extends Component {\r\n    constructor(){\r\n        super()\r\n        this.state ={\r\n            titulo: '',\r\n            imagen: '',            \r\n            descripcion: '',\r\n            precio:'',\r\n            stock:'',\r\n            _id: '',\r\n            productos:[]\r\n        }\r\n        this.handleChange=this.handleChange.bind(this)\r\n        this.agregarProducto=this.agregarProducto.bind(this)\r\n    }\r\n    handleChange(e){\r\n        const {name, value} = e.target;\r\n        this.setState({\r\n            [name]: value\r\n        })\r\n    }\r\n    componentDidMount(){\r\n        this.fetchProductos();\r\n      }\r\n      fetchProductos(){\r\n        fetch('http://localhost:4000/api/articulos')\r\n        .then(res=> res.json())\r\n        .then(data =>{\r\n          this.setState({productos:data})\r\n          console.log(this.state.productos)\r\n        })\r\n      }\r\n      deleteProducto(id){\r\n          if(confirm('Va a eliminar el libro?')){\r\n            fetch(`http://localhost:4000/api/articulos/${id}`,{\r\n              method:\"DELETE\",\r\n              headers: {\r\n                  \"Accept\": \"application/json\",\r\n                  \"Content-Type\": \"application/json\"\r\n              }\r\n          })\r\n          .then(res => res.json())\r\n          .then(data =>{\r\n              console.log(data);\r\n              alert(\"Producto eliminado\");\r\n              this.fetchProductos();\r\n          });\r\n          }\r\n          \r\n      }\r\n\r\n      editProducto(id){\r\n          fetch(`http://localhost:4000/api/articulos/${id}`)\r\n          .then(res => res.json())\r\n          .then(data =>{\r\n              console.log(data);\r\n              this.setState({\r\n                  titulo: data.titulo,\r\n                  imagen: data.imagen,\r\n                  descripcion: data.descripcion,\r\n                  precio: data.precio,\r\n                  stock: data.stock,\r\n                  _id: data._id\r\n              });\r\n          });\r\n      }\r\n    agregarProducto(e){\r\n        e.preventDefault();\r\n        //si state._id es diferente a vacío->voy a actualizar:\r\n        if (this.state._id){\r\n            fetch(`http://localhost:4000/api/articulos/${this.state._id}`,{\r\n                method: \"PUT\",\r\n                body: JSON.stringify({\r\n                    titulo: this.state.titulo,\r\n                    imagen: this.state.imagen,\r\n                    descripcion: this.state.descripcion,\r\n                    precio: this.state.precio,\r\n                    stock: this.state.stock\r\n                }),\r\n                headers:{\r\n                    \"Accept\": \"application/json\",\r\n                    \"Content-Type\": \"aplication/json\"\r\n                },\r\n            })\r\n            .then(res =>res.json)\r\n            .then(data => {\r\n                alert('Producto actualizado');\r\n                this.setState({\r\n                    titulo: \"\",\r\n                    imagen: \"\",\r\n                    descripcion: \"\",\r\n                    precio: \"\",\r\n                    stock: \"\",\r\n                    _id: \"\"\r\n                })\r\n                this.fetchProductos();\r\n            })\r\n          \r\n        }\r\n        //si state._id no está vacío-> voy a crearlo:\r\n        else{\r\n            fetch(\"http://localhost:4000/api/articulos\",{\r\n            method: \"POST\",\r\n            body: JSON.stringify(this.state),\r\n            headers:{\r\n                \"Accept\": \"application/json\",\r\n                \"Content-Type\": \"application/json\"\r\n            }\r\n        })\r\n        .then(res => res.json())\r\n        .then(data=>{\r\n            console.log(data);\r\n            alert(\"Producto creado\");\r\n            this.fetchProductos();\r\n        })\r\n\r\n        }\r\n        \r\n\r\n    }\r\n    render() {\r\n        return (\r\n        <Container>\r\n            <Col sm=\"3\">\r\n                <h4>Nuevo Libro</h4>\r\n                <form onSubmit={this.agregarProducto}>\r\n                    <div className=\"mb-3\">\r\n                        <input\r\n                         name=\"titulo\"\r\n                         className=\"form-control\" \r\n                         type=\"text\" \r\n                         placeholder=\"Ingrese Título\" \r\n                         onChange={this.handleChange} \r\n                         value={this.state.titulo} \r\n                        />\r\n            \r\n                    </div>\r\n                    <div className=\"mb-3\">\r\n                        <input \r\n                        name=\"imagen\" \r\n                        className=\"form-control\" \r\n                        type=\"text\" \r\n                        placeholder=\"Ingrese link de imagen\" \r\n                        onChange={this.handleChange} \r\n                        value={this.state.imagen} \r\n                        />\r\n                    </div>\r\n                    <div className=\"mb-3\">\r\n                        <input \r\n                        name=\"descripcion\" \r\n                        className=\"form-control\" \r\n                        type=\"text\" \r\n                        placeholder=\"Ingrese autor\" \r\n                        onChange={this.handleChange} \r\n                        value={this.state.descripcion} \r\n                        />\r\n                    </div>\r\n                    <div className=\"mb-3\">\r\n                        <input \r\n                        name=\"precio\" \r\n                        className=\"form-control\" \r\n                        type=\"text\" \r\n                        placeholder=\"Ingrese precio\" \r\n                        onChange={this.handleChange} \r\n                        value={this.state.precio} \r\n                        />\r\n                    </div>\r\n                    <div className=\"mb-3\">\r\n                        <input \r\n                        name=\"stock\" \r\n                        className=\"form-control\" \r\n                        type=\"number\" \r\n                        placeholder=\"Ingrese cantidad\" \r\n                        onChange={this.handleChange} \r\n                        value={this.state.stock} \r\n                        />\r\n                    </div>\r\n                    <button type=\"submit\" className=\"btn btn-primary\">Guardar</button>\r\n                </form>\r\n            </Col>\r\n            <Col sm = \"10\">\r\n                <h4>Lista de Libros</h4>\r\n                <table className=\"table\">\r\n                    <thead>\r\n                        <tr>\r\n                            <th>Titulo</th>\r\n                            <th>Imagen</th>\r\n                            <th>Autor</th>\r\n                            <th>Precio</th>\r\n                            <th>Cantidad</th>\r\n                            <th>Operacion</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                            {this.state.productos.map((producto) => {\r\n                                return (\r\n                                    <tr key={producto._id}>\r\n                                        <td>{producto.titulo}</td>\r\n                                        <td>{producto.imagen}</td>\r\n                                        <td>{producto.descripcion}</td>\r\n                                        <td>{producto.precio}</td>\r\n                                        <td>{producto.stock}</td>\r\n                                    \r\n                                    \r\n                                        <button onClick={()=>this.editProducto(producto._id)}\r\n                                        type=\"button\"\r\n                                        className=\"btn btn-info\">\r\n                                            Editar\r\n                                        </button>\r\n                                        <button onClick={()=>this.deleteProducto(producto._id)}\r\n                                        type=\"button\"\r\n                                        className=\"btn btn-danger\">\r\n                                            Borrar\r\n                                        </button>\r\n                                    \r\n                                    </tr>\r\n                                \r\n                                );\r\n                            })\r\n                        }\r\n                    </tbody>\r\n                </table>\r\n            </Col>\r\n        </Container>\r\n        );\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}