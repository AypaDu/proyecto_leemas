{"ast":null,"code":"import _defineProperty from \"C:\\\\Users\\\\Sony\\\\CICLO4\\\\LEEMAS\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"C:\\\\Users\\\\Sony\\\\CICLO4\\\\LEEMAS\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\Sony\\\\CICLO4\\\\LEEMAS\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\Sony\\\\CICLO4\\\\LEEMAS\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\Sony\\\\CICLO4\\\\LEEMAS\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\Sony\\\\CICLO4\\\\LEEMAS\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\Sony\\\\CICLO4\\\\LEEMAS\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"C:\\\\Users\\\\Sony\\\\CICLO4\\\\LEEMAS\\\\frontend\\\\src\\\\Componentes\\\\CrearProducto.js\";\nimport axios from 'axios';\nimport React, { Component } from 'react';\nimport { Col, Container } from 'reactstrap';\n\nvar CrearProducto = /*#__PURE__*/function (_Component) {\n  _inherits(CrearProducto, _Component);\n\n  function CrearProducto() {\n    var _this;\n\n    _classCallCheck(this, CrearProducto);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(CrearProducto).call(this));\n    _this.state = {\n      titulo: \"\",\n      imagen: \"\",\n      descripcion: \"\",\n      precio: \"\",\n      stock: \"\",\n      contacto: \"\",\n      _id: \"\",\n      productos: []\n    };\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.agregarProducto = _this.agregarProducto.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(CrearProducto, [{\n    key: \"handleChange\",\n    value: function handleChange(e) {\n      var _e$target = e.target,\n          name = _e$target.name,\n          value = _e$target.value;\n      this.setState(_defineProperty({}, name, value));\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.fetchProductos();\n    } // configura productos que es un array definido en la linea 14 para luego hacer una mapeo en la 214.\n\n  }, {\n    key: \"fetchProductos\",\n    value: function fetchProductos() {\n      var _this2 = this;\n\n      fetch(\"http://localhost:4000/api/articulos\").then(function (res) {\n        return res.json();\n      }).then(function (data) {\n        _this2.setState({\n          productos: data\n        });\n\n        console.log(_this2.state.productos);\n      });\n    }\n  }, {\n    key: \"deleteProducto\",\n    value: function deleteProducto(id) {\n      var _this3 = this;\n\n      if (window.confirm('Va a eliminar el libro?')) {\n        fetch(\"http://localhost:4000/api/articulos/\".concat(id), {\n          method: \"DELETE\",\n          headers: {\n            \"x-access-token\": localStorage.getItem('tok'),\n            \"Accept\": \"application/json\",\n            \"Content-Type\": \"application/json\"\n          }\n        }).then(function (res) {\n          return res.json();\n        }).then(function (data) {\n          console.log(data);\n          alert(\"Libro eliminado\");\n\n          _this3.fetchProductos();\n        });\n      }\n    }\n  }, {\n    key: \"editProducto\",\n    value: function editProducto(id) {\n      var _this4 = this;\n\n      fetch(\"http://localhost:4000/api/articulos/\".concat(id)).then(function (res) {\n        return res.json();\n      }).then(function (data) {\n        console.log(data);\n\n        _this4.setState({\n          titulo: data.titulo,\n          imagen: data.imagen,\n          descripcion: data.descripcion,\n          precio: data.precio,\n          stock: data.stock,\n          contacto: data.contacto,\n          _id: data._id\n        });\n      });\n    }\n  }, {\n    key: \"agregarProducto\",\n    value: function agregarProducto(e) {\n      var _this5 = this;\n\n      e.preventDefault(); //si state._id es diferente a vacío->voy a actualizar: PUT\n\n      if (this.state._id) {\n        axios.put(\"http://localhost:4000/api/articulos/\".concat(this.state._id), {\n          titulo: this.state.titulo,\n          imagen: this.state.imagen,\n          descripcion: this.state.descripcion,\n          precio: this.state.precio,\n          stock: this.state.stock,\n          contacto: this.state.contacto\n        }).then(function (response) {\n          alert('Libro actualizado'); //reseteamos el estado de todas las variables con vacio en el formulario\n\n          /* this.setState({\r\n              titulo: \"\",\r\n              imagen: \"\",\r\n              descripcion: \"\",\r\n              precio: \"\",\r\n              stock: \"\",\r\n              contacto: \"\",\r\n              _id: \"\"\r\n          }); */\n\n          this.fetchProductos(); //recupera todos los documentos de la base de datos\n\n          console.log('actualizacion exitosa');\n        }).catch(function (error) {\n          console.log('libro no actualizado');\n          console.log(error);\n          alert('error al actualizar el documento');\n        });\n        /* fetch(`http://localhost:4000/api/articulos/${this.state._id}`,{\r\n            method: \"PUT\",\r\n            body: JSON.stringify({\r\n                titulo: this.state.titulo,\r\n                imagen: this.state.imagen,\r\n                descripcion: this.state.descripcion,\r\n                precio: this.state.precio,\r\n                stock: this.state.stock,\r\n                contacto: this.state.contacto\r\n            }),\r\n            headers:{\r\n                \"x-access-token\": localStorage.getItem('tok'),\r\n                \"Accept\": \"application/json\",\r\n                \"Content-Type\": \"aplication/json\"\r\n            },\r\n        })\r\n        .then(res =>res.json)\r\n        .then(_data => {\r\n            alert('Libro actualizado');\r\n            //reseteamos el estado de todas las variables con vacio en el formulario\r\n            this.setState({\r\n                titulo: \"\",\r\n                imagen: \"\",\r\n                descripcion: \"\",\r\n                precio: \"\",\r\n                stock: \"\",\r\n                contacto: \"\",\r\n                _id: \"\"\r\n            });\r\n            this.fetchProductos();   //recupera todos los documentos de la base de datos\r\n        }) */\n      } //si state._id no está vacío-> voy a crearlo: POST\n      else {\n        fetch(\"http://localhost:4000/api/articulos\", {\n          method: \"POST\",\n          body: JSON.stringify(this.state),\n          headers: {\n            \"x-access-token\": localStorage.getItem('tok'),\n            \"Accept\": \"application/json\",\n            \"Content-Type\": \"application/json\"\n          }\n        }).then(function (res) {\n          return res.json();\n        }).then(function (data) {\n          console.log(data);\n          alert(\"Libro creado\");\n\n          _this5.fetchProductos();\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this6 = this;\n\n      return /*#__PURE__*/React.createElement(Container, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        sm: \"3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"h4\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 17\n        }\n      }, \"Nuevo Libro\"), /*#__PURE__*/React.createElement(\"form\", {\n        onSubmit: this.agregarProducto,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"mb-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        name: \"titulo\",\n        className: \"form-control\",\n        type: \"text\",\n        placeholder: \"T\\xEDtulo\",\n        onChange: this.handleChange,\n        value: this.state.titulo,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 25\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"mb-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        name: \"imagen\",\n        className: \"form-control\",\n        type: \"text\",\n        placeholder: \"Ingrese link de imagen\",\n        onChange: this.handleChange,\n        value: this.state.imagen,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 25\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"mb-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        name: \"descripcion\",\n        className: \"form-control\",\n        type: \"text\",\n        placeholder: \"Autor\",\n        onChange: this.handleChange,\n        value: this.state.descripcion,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 25\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"mb-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        name: \"precio\",\n        className: \"form-control\",\n        type: \"text\",\n        placeholder: \"Ciudad donde se encuentra el libro\",\n        onChange: this.handleChange,\n        value: this.state.precio,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 25\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"mb-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        name: \"stock\",\n        className: \"form-control\",\n        type: \"number\",\n        placeholder: \"A\\xF1o de edici\\xF3n\",\n        onChange: this.handleChange,\n        value: this.state.stock,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 25\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"mb-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        name: \"contacto\",\n        className: \"form-control\",\n        type: \"text\",\n        placeholder: \"cuenta de correo\",\n        onChange: this.handleChange,\n        value: this.state.contacto,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 25\n        }\n      })), /*#__PURE__*/React.createElement(\"button\", {\n        type: \"submit\",\n        className: \"btn btn-primary\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 21\n        }\n      }, \"Guardar\"))), /*#__PURE__*/React.createElement(Col, {\n        sm: \"10\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"h4\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 17\n        }\n      }, \"Lista de Libros\"), /*#__PURE__*/React.createElement(\"table\", {\n        className: \"table\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"thead\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 29\n        }\n      }, \"Titulo\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 29\n        }\n      }, \"Imagen\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 29\n        }\n      }, \"Autor\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 29\n        }\n      }, \"Ciudad\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 29\n        }\n      }, \"A\\xF1o de Edici\\xF3n\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 29\n        }\n      }, \"Contacto\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 29\n        }\n      }, \"Operacion\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 21\n        }\n      }, this.state.productos.map(function (producto) {\n        return /*#__PURE__*/React.createElement(\"tr\", {\n          key: producto._id,\n          __self: _this6,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 248,\n            columnNumber: 37\n          }\n        }, /*#__PURE__*/React.createElement(\"td\", {\n          __self: _this6,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 249,\n            columnNumber: 41\n          }\n        }, producto.titulo), /*#__PURE__*/React.createElement(\"td\", {\n          __self: _this6,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 250,\n            columnNumber: 41\n          }\n        }, producto.imagen), /*#__PURE__*/React.createElement(\"td\", {\n          __self: _this6,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 251,\n            columnNumber: 41\n          }\n        }, producto.descripcion), /*#__PURE__*/React.createElement(\"td\", {\n          __self: _this6,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 252,\n            columnNumber: 41\n          }\n        }, producto.precio), /*#__PURE__*/React.createElement(\"td\", {\n          __self: _this6,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 253,\n            columnNumber: 41\n          }\n        }, producto.stock), /*#__PURE__*/React.createElement(\"td\", {\n          __self: _this6,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 254,\n            columnNumber: 41\n          }\n        }, producto.contacto), /*#__PURE__*/React.createElement(\"td\", {\n          __self: _this6,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 255,\n            columnNumber: 41\n          }\n        }, /*#__PURE__*/React.createElement(\"button\", {\n          onClick: function onClick() {\n            return _this6.editProducto(producto._id);\n          },\n          type: \"button\",\n          className: \"btn btn-info\",\n          __self: _this6,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 257,\n            columnNumber: 45\n          }\n        }, \"Editar\"), /*#__PURE__*/React.createElement(\"button\", {\n          onClick: function onClick() {\n            return _this6.deleteProducto(producto._id);\n          },\n          type: \"button\",\n          className: \"btn btn-danger\",\n          __self: _this6,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 262,\n            columnNumber: 45\n          }\n        }, \"Borrar\")));\n      })))));\n    }\n  }]);\n\n  return CrearProducto;\n}(Component);\n\nexport { CrearProducto as default };","map":{"version":3,"sources":["C:/Users/Sony/CICLO4/LEEMAS/frontend/src/Componentes/CrearProducto.js"],"names":["axios","React","Component","Col","Container","CrearProducto","state","titulo","imagen","descripcion","precio","stock","contacto","_id","productos","handleChange","bind","agregarProducto","e","target","name","value","setState","fetchProductos","fetch","then","res","json","data","console","log","id","window","confirm","method","headers","localStorage","getItem","alert","preventDefault","put","response","catch","error","body","JSON","stringify","map","producto","editProducto","deleteProducto"],"mappings":"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","sourcesContent":["import axios from 'axios';\r\nimport React, { Component } from 'react';\r\nimport {Col, Container} from 'reactstrap';\r\nexport default class CrearProducto extends Component {\r\n    constructor(){\r\n        super();\r\n        this.state ={\r\n            titulo: \"\",\r\n            imagen: \"\",            \r\n            descripcion: \"\",\r\n            precio:\"\",\r\n            stock:\"\",\r\n            contacto:\"\", \r\n            _id: \"\",\r\n            productos:[],\r\n        };\r\n        this.handleChange=this.handleChange.bind(this);\r\n        this.agregarProducto=this.agregarProducto.bind(this);\r\n    }\r\n    handleChange(e){\r\n        const {name, value} = e.target;\r\n        this.setState({\r\n            [name]: value\r\n        })\r\n    }\r\n    componentDidMount(){\r\n        this.fetchProductos();\r\n      }\r\n      // configura productos que es un array definido en la linea 14 para luego hacer una mapeo en la 214.\r\n      fetchProductos(){\r\n        fetch(\"http://localhost:4000/api/articulos\")\r\n        .then(res=> res.json())\r\n        .then(data =>{\r\n          this.setState({productos:data});\r\n          console.log(this.state.productos);\r\n        });\r\n      }\r\n      deleteProducto(id){\r\n          if(window.confirm('Va a eliminar el libro?')){\r\n                fetch(`http://localhost:4000/api/articulos/${id}`,{\r\n              method: \"DELETE\",\r\n              headers: {\r\n                \"x-access-token\": localStorage.getItem('tok'),\r\n                \"Accept\": \"application/json\",\r\n                \"Content-Type\": \"application/json\",\r\n              },\r\n          })\r\n          .then(res => res.json())\r\n          .then(data =>{\r\n              console.log(data);\r\n              alert(\"Libro eliminado\");\r\n              this.fetchProductos();\r\n          });\r\n          }\r\n          \r\n      }\r\n\r\n      editProducto(id){\r\n          fetch(`http://localhost:4000/api/articulos/${id}`)\r\n          .then(res => res.json())\r\n          .then(data =>{\r\n              console.log(data);\r\n              this.setState({\r\n                  titulo: data.titulo,\r\n                  imagen: data.imagen,\r\n                  descripcion: data.descripcion,\r\n                  precio: data.precio,\r\n                  stock: data.stock,\r\n                  contacto: data.contacto,\r\n                  _id: data._id,\r\n              });\r\n          });\r\n      }\r\n    agregarProducto(e){\r\n        e.preventDefault();\r\n        //si state._id es diferente a vacío->voy a actualizar: PUT\r\n        if (this.state._id){\r\n            axios.put(`http://localhost:4000/api/articulos/${this.state._id}`,{\r\n                titulo: this.state.titulo,\r\n                imagen: this.state.imagen,\r\n                descripcion: this.state.descripcion,\r\n                precio: this.state.precio,\r\n                stock: this.state.stock,\r\n                contacto: this.state.contacto    \r\n            }).then(function(response){\r\n                alert('Libro actualizado');\r\n                //reseteamos el estado de todas las variables con vacio en el formulario\r\n                /* this.setState({\r\n                    titulo: \"\",\r\n                    imagen: \"\",\r\n                    descripcion: \"\",\r\n                    precio: \"\",\r\n                    stock: \"\",\r\n                    contacto: \"\",\r\n                    _id: \"\"\r\n                }); */\r\n                this.fetchProductos();   //recupera todos los documentos de la base de datos\r\n                console.log('actualizacion exitosa')\r\n            }).catch(function(error){\r\n                console.log('libro no actualizado')\r\n                console.log(error)\r\n                alert('error al actualizar el documento');\r\n            });\r\n\r\n\r\n            /* fetch(`http://localhost:4000/api/articulos/${this.state._id}`,{\r\n                method: \"PUT\",\r\n                body: JSON.stringify({\r\n                    titulo: this.state.titulo,\r\n                    imagen: this.state.imagen,\r\n                    descripcion: this.state.descripcion,\r\n                    precio: this.state.precio,\r\n                    stock: this.state.stock,\r\n                    contacto: this.state.contacto\r\n                }),\r\n                headers:{\r\n                    \"x-access-token\": localStorage.getItem('tok'),\r\n                    \"Accept\": \"application/json\",\r\n                    \"Content-Type\": \"aplication/json\"\r\n                },\r\n            })\r\n            .then(res =>res.json)\r\n            .then(_data => {\r\n                alert('Libro actualizado');\r\n                //reseteamos el estado de todas las variables con vacio en el formulario\r\n                this.setState({\r\n                    titulo: \"\",\r\n                    imagen: \"\",\r\n                    descripcion: \"\",\r\n                    precio: \"\",\r\n                    stock: \"\",\r\n                    contacto: \"\",\r\n                    _id: \"\"\r\n                });\r\n                this.fetchProductos();   //recupera todos los documentos de la base de datos\r\n            }) */\r\n          \r\n        }\r\n        //si state._id no está vacío-> voy a crearlo: POST\r\n        else{\r\n            fetch(\"http://localhost:4000/api/articulos\",{\r\n            method: \"POST\",\r\n            body: JSON.stringify(this.state),\r\n            headers:{\r\n                \"x-access-token\": localStorage.getItem('tok'),\r\n                \"Accept\": \"application/json\",\r\n                \"Content-Type\": \"application/json\"\r\n            },\r\n        })\r\n        .then(res => res.json())\r\n        .then(data=>{\r\n            console.log(data);\r\n            alert(\"Libro creado\");\r\n            this.fetchProductos();\r\n        });\r\n\r\n        }\r\n        \r\n\r\n    }\r\n    render() {\r\n        return (\r\n        <Container>\r\n            <Col sm=\"3\">\r\n                <h4>Nuevo Libro</h4>\r\n                <form onSubmit={this.agregarProducto}>\r\n                    <div className=\"mb-3\">\r\n                        <input\r\n                         name=\"titulo\"\r\n                         className=\"form-control\" \r\n                         type=\"text\" \r\n                         placeholder=\"Título\" \r\n                         onChange={this.handleChange} \r\n                         value={this.state.titulo} \r\n                        />\r\n            \r\n                    </div>\r\n                    <div className=\"mb-3\">\r\n                        <input \r\n                        name=\"imagen\" \r\n                        className=\"form-control\" \r\n                        type=\"text\" \r\n                        placeholder=\"Ingrese link de imagen\" \r\n                        onChange={this.handleChange} \r\n                        value={this.state.imagen} \r\n                        />\r\n                    </div>\r\n                    <div className=\"mb-3\">\r\n                        <input \r\n                        name=\"descripcion\" \r\n                        className=\"form-control\" \r\n                        type=\"text\" \r\n                        placeholder=\"Autor\" \r\n                        onChange={this.handleChange} \r\n                        value={this.state.descripcion} \r\n                        />\r\n                    </div>\r\n                    <div className=\"mb-3\">\r\n                        <input \r\n                        name=\"precio\" \r\n                        className=\"form-control\" \r\n                        type=\"text\" \r\n                        placeholder=\"Ciudad donde se encuentra el libro\" \r\n                        onChange={this.handleChange} \r\n                        value={this.state.precio} \r\n                        />\r\n                    </div>\r\n                    <div className=\"mb-3\">\r\n                        <input \r\n                        name=\"stock\" \r\n                        className=\"form-control\" \r\n                        type=\"number\" \r\n                        placeholder=\"Año de edición\" \r\n                        onChange={this.handleChange} \r\n                        value={this.state.stock} \r\n                        />\r\n                    </div>\r\n                    <div className=\"mb-3\">\r\n                        <input \r\n                        name=\"contacto\" \r\n                        className=\"form-control\" \r\n                        type=\"text\" \r\n                        placeholder=\"cuenta de correo\" \r\n                        onChange={this.handleChange} \r\n                        value={this.state.contacto} \r\n                        />\r\n                    </div>\r\n                    <button type=\"submit\" className=\"btn btn-primary\">Guardar</button>\r\n                </form>\r\n            </Col>\r\n            <Col sm = \"10\">\r\n                <h4>Lista de Libros</h4>\r\n                <table className=\"table\">\r\n                    <thead>\r\n                        <tr>\r\n                            <th>Titulo</th>\r\n                            <th>Imagen</th>\r\n                            <th>Autor</th>\r\n                            <th>Ciudad</th>\r\n                            <th>Año de Edición</th>\r\n                            <th>Contacto</th>\r\n                            <th>Operacion</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                            {this.state.productos.map((producto) => {\r\n                                return (\r\n                                    <tr key={producto._id}>\r\n                                        <td>{producto.titulo}</td>\r\n                                        <td>{producto.imagen}</td>\r\n                                        <td>{producto.descripcion}</td>\r\n                                        <td>{producto.precio}</td>\r\n                                        <td>{producto.stock}</td>\r\n                                        <td>{producto.contacto}</td>\r\n                                        <td>\r\n                                        \r\n                                            <button onClick={()=>this.editProducto(producto._id)}\r\n                                            type=\"button\"\r\n                                            className=\"btn btn-info\">\r\n                                                Editar\r\n                                            </button>\r\n                                            <button onClick={()=>this.deleteProducto(producto._id)}\r\n                                            type=\"button\"\r\n                                            className=\"btn btn-danger\">\r\n                                                Borrar\r\n                                            </button>\r\n                                        </td>\r\n                                    </tr>\r\n                                \r\n                                );\r\n                            })\r\n                        }\r\n                    </tbody>\r\n                </table>\r\n            </Col>\r\n        </Container>\r\n        );\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}